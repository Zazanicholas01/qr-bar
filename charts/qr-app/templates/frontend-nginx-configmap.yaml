apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "qr-app.fullname" . }}-frontend-nginx
  labels:
    {{- include "qr-app.labels" . | nindent 4 }}
    app.kubernetes.io/component: frontend
data:
  default.conf: |
    server {
      listen       80;
      server_name  _;

      root /usr/share/nginx/html;
      index index.html;

      # SPA fallback: serve index.html for any non-file request
      location / {
        try_files $uri $uri/ /index.html;
      }

      # Static assets (built paths)
      location /static/ {
        try_files $uri =404;
      }
    }

