namespace: qr

image:
  backend: ghcr.io/you/qr-backend:latest
  frontend: ghcr.io/you/qr-frontend:latest

replicas:
  backend: 2
  frontend: 2

service:
  type: ClusterIP
  backend:
    port: 8000
  frontend:
    port: 80

imagePullSecrets: []

env:
  backend:
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef: { name: app-secrets, key: DATABASE_URL }
    - name: REDIS_URL
      valueFrom:
        secretKeyRef: { name: app-secrets, key: REDIS_URL }
    - name: APP_ENV
      value: "prod"
    # Sensible defaults for in-cluster services if DATABASE_URL is not set
    - name: POSTGRES_HOST
      value: "postgres"
    - name: POSTGRES_PORT
      value: "5432"

ingress:
  enabled: true
  className: nginx
  annotations:
    cert-manager.io/cluster-issuer: selfsigned
  tls:
    - hosts: [ "orders.local" ]
      secretName: web-tls
  hosts:
    - host: orders.local
      paths:
        - path: /
          pathType: Prefix
          serviceName: frontend
          servicePort: 80
        - path: /api
          pathType: Prefix
          serviceName: backend
          servicePort: 8000

# Service account settings
serviceAccount:
  create: false
  name: ""

# Autoscaling disabled by default
autoscaling:
  enabled: false
